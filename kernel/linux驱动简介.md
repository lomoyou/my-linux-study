# *linux驱动简介与分类*

## linux驱动简介

### linux系统分层

应用程序(application)->系统调用(API)->内核(linux kernel)->驱动(driver)->硬件(hardware) 
### 驱动的作用

linux驱动程序的主要作用。
    
    1. 系统调用是应用程序和内核之间的接口，驱动程序是内核和硬件之间的接口。
    2. 驱动程序接受上层软件的请求，完成对硬件的操作，屏蔽了硬件的细节。
    3. 驱动程序将硬件设备抽象成一个文件，应用程序操作文件即操作硬件，符合linux "一切皆文件"的思想。  

## 驱动的分类和特点

计算机硬件系统有CPU、存储器以及外设组成，Linux驱动针对的对象是存储器和外设；Linux将驱动分为三大类：字符设备驱动、块设备驱动以及网络设备驱动。

    1. 字符设备驱动：应用程序与驱动程序之间的数据交互是以字符(字节)为单位的，字符设备通常没有中间缓存。常见的字符设备有：led、key、camera、显卡、串口等。
    2. 块设备驱动：应用程序与驱动程序之间的数据交互是以块为单位的，主要针对的是存储设备，通常设有中间缓存，并且带有文件系统，可以任意位置访问。常见的块设备有：U盘、eMMC、SD卡等。
    3. 网络设备驱动：网络设备面向数据包的发送而设计，它并不对应于文件系统的节点。即不对应 /dev 目录下的设备文件，应用程序最终通过套接字 socket 完成与网络设备的数据交互。常见的网络设备有网卡(无线网卡、有线网卡)。
    1. 
linux驱动有两种形式，编译进内核，或者编译成模块。

## 常用命令
```c
insmod: 加载驱动模块，不能解决模块间依赖关系，必须先加载依赖模块。
rmmod: 卸载驱动模块。
modprode: 加载驱动模块，可以自动加载所需要的依赖模块。
modporde -r :卸载驱动模块及其依赖的其他驱动模块。 
```