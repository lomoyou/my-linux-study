# *操作系统的引导*

操作系统的引导就是从硬件上电到执行linux操作系统的main函数的过程，其目的是实现从启动盘加载操作系统程序，完成执行main函数所需要的准备工作。主要分为三步：
第一步，启动BIOS，准备实模式下的终端向量表和中断服务程序；
第二步，从启动盘加载操作系统到内存；
第三步，为main函数做过渡工作。
注：可参考《Linux内核设计的艺术-图解Linux操作系统架构的设计与实现原理》一书，以及Linux内核源码1.0，0.11版本。

## 启动BIOS，准备实模式下的终端向量表和中断服务程序

### BIOS的启动原理

从硬件角度看，Intel 80x86系列的CPU可以分别在16位的实模式和32的无保护模式下运行。CPU的硬件都设计为加点即进入16位实模式状态运行。CPU硬件逻辑设计为加点瞬间强将CS的值设置为0xF000，IP的值设置为0xFFF0。这样CS:IP就指向了0xFFF0这个地址。也就是BIOS程序的入口地址为0xFFFF0，也是BIOS存储的总线地址。

### BIOS在内存中加载终端向量表和和终端服务程序

BIOS程序被固话在计算机主板上的一块很小的ROM芯片里（掉电不丢失）。在BIOS程序启动时，会在内存中建立中断向量表和中断服务程序，通过这些中断服务程序就可以将系统内核加载到内存中。

## 加载操作系统内核程序

计算机分三部分逐次机子啊操作系统内核代码，第一步，由BIOS中断int 0x19把第一扇区的bootsect的内容加载到内存；第二步，第三步在bootsect的指挥下，分别将其后的4个扇区和随后的240个扇区的内容加载到内存。